<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>量子脉冲 · 2025 AI 趋势互动杂志</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Noto+Sans+SC:wght@300;400;500;700;900&family=Oswald:wght@500&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['"Inter"', '"Noto Sans SC"', 'sans-serif'],
            display: ['"Oswald"', 'sans-serif'],
          },
          colors: {
            ink: '#0F172A',
            accent: '#3B82F6',
          },
        },
      },
    };
  </script>
  <style>
    :root {
      --a4-width: 794px;
      --a4-height: 1123px;
    }

    body {
      background: #0b1020;
    }

    @media print {
      body {
        background: white;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .no-print {
        display: none !important;
      }

      .viewport-scale {
        transform: none !important;
      }

      .page-viewport {
        box-shadow: none !important;
        border: none !important;
      }

      .page-content {
        overflow: visible !important;
      }
    }

    .viewport-scale {
      transform-origin: center top;
      transition: transform 0.2s ease;
    }

    .page-viewport {
      width: var(--a4-width);
      height: var(--a4-height);
      background: #f8fafc;
      border-radius: 18px;
      box-shadow: 0 40px 120px rgba(15, 23, 42, 0.4);
      border: 1px solid rgba(148, 163, 184, 0.35);
      overflow: hidden;
    }

    .pages-container {
      display: flex;
      height: 100%;
      transition: transform 0.6s ease;
    }

    .magazine-page {
      width: 100%;
      height: 100%;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
    }

    .page-header,
    .page-footer {
      padding: 32px 48px;
    }

    .page-content {
      flex: 1;
      padding: 0 48px 32px;
      overflow: auto;
    }

    .column-text {
      column-count: 2;
      column-gap: 28px;
      text-align: justify;
      font-size: 14px;
      line-height: 1.6;
      color: #1f2937;
    }

    .column-text p {
      break-inside: avoid;
      margin-bottom: 14px;
    }

    .image-frame {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(59, 130, 246, 0.25);
      box-shadow: 0 20px 50px rgba(59, 130, 246, 0.15);
    }

    .image-frame img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .loader {
      border: 3px solid rgba(148, 163, 184, 0.4);
      border-top: 3px solid #3B82F6;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .toc-card {
      background: #ffffff;
      border: 1px solid rgba(148, 163, 184, 0.4);
      border-radius: 14px;
      padding: 14px 16px;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.08);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center px-4 py-6 text-ink font-sans">
  <div class="flex-1 w-full flex items-start justify-center">
    <div class="viewport-scale" id="viewport-scale">
      <div class="page-viewport">
        <div id="pages-container" class="pages-container">
          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-xs tracking-[0.3em] text-accent font-bold uppercase">Quantum Pulse</p>
                  <p class="text-[11px] tracking-[0.3em] text-slate-500">AI TREND INTERACTIVE MAGAZINE</p>
                </div>
                <p class="text-xs text-slate-500">2025 · Vol.01</p>
              </div>
            </header>
            <div class="page-content flex flex-col justify-between">
              <div class="grid grid-cols-[1.1fr_0.9fr] gap-8 items-center mt-6">
                <div>
                  <h1 class="text-5xl font-black text-slate-900 leading-tight">
                    量子脉冲
                    <span class="block text-2xl font-semibold text-slate-500 mt-3">2025 AI 趋势互动杂志</span>
                  </h1>
                  <p class="mt-6 text-base text-slate-600 leading-relaxed">
                    以科技视觉重构杂志阅读体验：更轻的文字密度、更强的图像叙事与可互动的趋势解读。
                  </p>
                  <div class="mt-6 flex flex-wrap gap-3 text-xs text-slate-500">
                    <span class="px-3 py-1 rounded-full border border-slate-200">A4 竖版</span>
                    <span class="px-3 py-1 rounded-full border border-slate-200">互动翻页</span>
                    <span class="px-3 py-1 rounded-full border border-slate-200">AI 问答</span>
                  </div>
                </div>
                <div class="image-frame h-[420px]">
                  <img src="https://image.pollinations.ai/prompt/ultra%20futuristic%20magazine%20cover%20clean%20neon%20grid%20ai%20interface%20minimal%20tech%20lighting?width=800&height=1100&nologo=true" alt="Quantum Pulse Cover" />
                </div>
              </div>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>封面 · 科技叙事起点</span>
              <span class="font-display text-xl text-slate-300">01</span>
            </footer>
          </section>

          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <h2 class="text-3xl font-bold text-slate-900">目录 · 2025 AI 特刊</h2>
                <span class="text-xs text-slate-500 tracking-[0.2em]">CONTENTS</span>
              </div>
            </header>
            <div class="page-content mt-6">
              <div class="grid grid-cols-2 gap-4 text-sm text-slate-700">
                <div class="space-y-3">
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题一</p>
                    <p class="font-semibold">2025 年度 AI 十大趋势总结 · 技术形态的跃迁</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题二</p>
                    <p class="font-semibold">AI 产业格局新图谱：产业链重构与基础设施升级</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题三</p>
                    <p class="font-semibold">Agent 与具身智能的崛起（从 Chatbot 到执行体）</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题四</p>
                    <p class="font-semibold">大模型推理时代：多模态应用与 AI 编程革新</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题五</p>
                    <p class="font-semibold">CUA（Computer-Using Agent）概念与实现方式</p>
                  </div>
                </div>
                <div class="space-y-3">
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题六</p>
                    <p class="font-semibold">六大 AI 巨头战略比较：Google、OpenAI、阿里云、华为、百度、火山引擎</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题七</p>
                    <p class="font-semibold">企业级 AI 实践：智能体落地与央企数智化转型</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题八</p>
                    <p class="font-semibold">传统软件 + AI 原生服务商的组织再构</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题九</p>
                    <p class="font-semibold">面向消费者的 AI 产品：AIGC 助手与 “Agentic Internet” 生态</p>
                  </div>
                  <div class="toc-card">
                    <p class="text-xs text-accent tracking-[0.2em]">专题十</p>
                    <p class="font-semibold">算力成本降低与 AI 应用“普惠化”新格局</p>
                  </div>
                </div>
              </div>
              <div class="mt-6 text-xs text-slate-500 space-y-1">
                <p>AI 治理与合规：政策与规范的新进展</p>
                <p>轻量板块：图像/视频生成前沿、2025 黑科技概念榜、2026 趋势预测与企业战略展望</p>
              </div>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>目录页 · 清晰层级</span>
              <span class="font-display text-xl text-slate-300">02</span>
            </footer>
          </section>

          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-xs uppercase tracking-[0.25em] text-accent">Feature · Article 01</p>
                  <h2 class="text-4xl font-bold mt-2 text-slate-900">2025 年度 AI 十大趋势</h2>
                  <p class="text-sm text-slate-500 mt-1">TOP 10 TRENDS IN ARTIFICIAL INTELLIGENCE · 第 1 / 4 页</p>
                </div>
                <button onclick="openArticleDetail()" class="text-xs px-4 py-2 rounded-full border border-accent text-accent hover:bg-blue-50">
                  点击标题查看全文
                </button>
              </div>
            </header>
            <div class="page-content mt-6">
              <div class="grid grid-cols-[1.1fr_0.9fr] gap-8 items-start">
                <div class="space-y-5">
                  <div class="border border-slate-200 rounded-xl p-5 bg-white">
                    <p class="text-xs text-accent tracking-[0.2em] uppercase">卷首语 / Intro</p>
                    <p class="text-sm text-slate-600 leading-relaxed mt-3">
                      我们正站在历史的转折点。从算力重构产业基石，到 Agentic 互联网开启交互新纪元。AI 技术正以前所未有的速度渗透物理世界，中国力量在开源生态中强势崛起。这是从“应用”迈向“深度渗透”的关键一年。
                    </p>
                  </div>
                  <div class="border border-slate-200 rounded-xl p-5 bg-white">
                    <p class="text-xs text-slate-500">阅读方式</p>
                    <ul class="mt-3 text-sm text-slate-600 space-y-2 list-disc pl-4">
                      <li>每页双栏文本，保持低密度阅读。</li>
                      <li>点击标题可打开完整长文内容。</li>
                      <li>右侧配科技感图片，建立视觉节奏。</li>
                    </ul>
                  </div>
                </div>
                <div class="image-frame h-[400px]">
                  <img src="https://image.pollinations.ai/prompt/futuristic%20ai%20city%20holographic%20data%20streams%20cool%20blue%20minimal%20tech%20lighting?width=900&height=1100&nologo=true" alt="AI Intro" />
                </div>
              </div>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>趋势综述 · 卷首语</span>
              <span class="font-display text-xl text-slate-300">03</span>
            </footer>
          </section>

          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-xs uppercase tracking-[0.25em] text-accent">Part 1 · Infrastructure Reboot</p>
                  <h2 class="text-3xl font-bold mt-2 text-slate-900">基础设施重塑</h2>
                  <p class="text-sm text-slate-500 mt-1">第 2 / 4 页</p>
                </div>
                <button onclick="analyzeTrend('基础设施重塑', '算力基建与芯片 AI 化带来产业底座重构。')" class="text-xs px-4 py-2 rounded-full border border-accent text-accent hover:bg-blue-50">
                  AI 解读
                </button>
              </div>
            </header>
            <div class="page-content mt-6">
              <div class="grid grid-cols-[1.1fr_0.9fr] gap-8 items-start">
                <div class="column-text">
                  <p><strong>01 算力基建化 · Data Center as a Factory</strong><br />
                    数据中心不再仅是托管场所，而是集成了海量计算、存储的“算力工厂”。算力需求狂飙，已成为驱动智能产业发展的第一大引擎。</p>
                  <p><strong>02 芯片 AI 化 · AI-Native Chips</strong><br />
                    为了适应神经网络，芯片架构正从“通用计算”向“AI 原生”剧变。NPU 普及与 ASIC 增长，打破了传统 CPU/GPU 的垄断逻辑。</p>
                </div>
                <div class="image-frame h-[400px]">
                  <img src="https://image.pollinations.ai/prompt/ai%20data%20center%20clean%20server%20hall%20blue%20accent%20minimal%20tech%20lighting?width=900&height=1100&nologo=true" alt="Infrastructure" />
                </div>
              </div>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>Part 1 · 基础设施重塑</span>
              <span class="font-display text-xl text-slate-300">04</span>
            </footer>
          </section>

          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-xs uppercase tracking-[0.25em] text-accent">Part 2 · Model Evolution</p>
                  <h2 class="text-3xl font-bold mt-2 text-slate-900">模型进化论</h2>
                  <p class="text-sm text-slate-500 mt-1">第 3 / 4 页</p>
                </div>
                <button onclick="analyzeTrend('模型进化论', '架构创新与推理能力重塑模型竞争格局。')" class="text-xs px-4 py-2 rounded-full border border-accent text-accent hover:bg-blue-50">
                  AI 解读
                </button>
              </div>
            </header>
            <div class="page-content mt-6">
              <div class="grid grid-cols-[1.1fr_0.9fr] gap-8 items-start">
                <div class="column-text">
                  <p><strong>03 架构即阶层 · Architecture Defines Class</strong><br />
                    预训练决定模型梯队，而架构创新（如 MoE、线性注意力）决定预训练水平。新架构正在打破 Transformer 的效率瓶颈，实现更低成本的更大参数。</p>
                  <p><strong>04 推理侧革命 · Inference Innovation</strong><br />
                    大模型落地进入“推理时间”。通过让模型“慢思考” (System 2)，利用更长的推理过程解决复杂问题，推理能力成为新的技术竞争高地。</p>
                  <p><strong>05 具身智能合流 · Physical AI Convergence</strong><br />
                    信息 AI 正走向物理 AI。世界模型成为核心，赋予机器人理解物理规律的“大脑”，具身智能迎来从实验室走向商业化的风口。</p>
                </div>
                <div class="image-frame h-[400px]">
                  <img src="https://image.pollinations.ai/prompt/futuristic%20neural%20network%20minimal%20holographic%20nodes%20blue%20accent%20dark%20tech%20background?width=900&height=1100&nologo=true" alt="Model Evolution" />
                </div>
              </div>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>Part 2 · 模型进化论</span>
              <span class="font-display text-xl text-slate-300">05</span>
            </footer>
          </section>

          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-xs uppercase tracking-[0.25em] text-accent">Part 3-4 · Application & China Moment</p>
                  <h2 class="text-3xl font-bold mt-2 text-slate-900">应用新版图 · 中国时间</h2>
                  <p class="text-sm text-slate-500 mt-1">第 4 / 4 页</p>
                </div>
                <button onclick="analyzeTrend('应用新版图', 'Agentic 互联网与开源生态引领新秩序。')" class="text-xs px-4 py-2 rounded-full border border-accent text-accent hover:bg-blue-50">
                  AI 解读
                </button>
              </div>
            </header>
            <div class="page-content mt-6">
              <div class="grid grid-cols-[1.1fr_0.9fr] gap-8 items-start">
                <div class="column-text">
                  <p><strong>06 Agentic 互联网 · Traffic Entry Point Reshaped</strong><br />
                    AI Agent 重塑流量入口。从“人找服务”转变为“服务找人”，自主规划、执行任务的智能体将逐渐取代传统 App 和搜索引擎。</p>
                  <p><strong>07 多模态生产力 · Multimodal Productivity</strong><br />
                    视频生成、3D 建模与代码生成 (Vibe Coding) 依次爆发。AI 不再只是辅助，而是成为影视、游戏开发及软件工程的标准生产工具。</p>
                  <p><strong>08 硬件百端齐放 · AI Hardware Explosion</strong><br />
                    “换脑”时刻已至。手机、PC、眼镜甚至玩具都在植入端侧大模型，实现低延时、高隐私的本地化智能体验。</p>
                  <p><strong>09 AI4S 突破 · Science Acceleration</strong><br />
                    AI 达到数理博士水平。从工具进化为“AI 科学家”，在材料、生物、化学等领域自主发现规律，加速 AGI 的最终实现。</p>
                  <p><strong>10 开源主导权 · Open Source Leadership</strong><br />
                    开源 AI 进入“中国时间”。中国企业与机构正从跟随者变为引领者，通过强大的开源模型与生态构建，走出一条自主可控的 AGI 路线。</p>
                </div>
                <div class="image-frame h-[400px]">
                  <img src="https://image.pollinations.ai/prompt/futuristic%20smart%20city%20clean%20holographic%20agents%20minimal%20blue%20tech%20background?width=900&height=1100&nologo=true" alt="Application Landscape" />
                </div>
              </div>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>Part 3-4 · 应用新版图 & 中国时间</span>
              <span class="font-display text-xl text-slate-300">06</span>
            </footer>
          </section>

          <section class="magazine-page">
            <header class="page-header border-b border-slate-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-xs tracking-[0.3em] text-accent font-bold uppercase">Quantum Pulse</p>
                  <p class="text-[11px] tracking-[0.3em] text-slate-500">BACK COVER</p>
                </div>
                <p class="text-xs text-slate-500">2025 · AI EDITION</p>
              </div>
            </header>
            <div class="page-content flex flex-col justify-between mt-6">
              <div class="grid grid-cols-[0.95fr_1.05fr] gap-8 items-center">
                <div class="image-frame h-[420px]">
                  <img src="https://image.pollinations.ai/prompt/abstract%20quantum%20pulse%20wave%20minimal%20neon%20blue%20lines%20clean%20white%20background?width=800&height=1100&nologo=true" alt="Back Cover" />
                </div>
                <div>
                  <h3 class="text-3xl font-bold text-slate-900">AI 治理与合规</h3>
                  <p class="text-sm text-slate-600 mt-4 leading-relaxed">
                    关注政策、规范与可信 AI 的新进展，探讨企业如何在合规框架内释放创新潜能。
                  </p>
                  <div class="mt-6 space-y-2 text-xs text-slate-500">
                    <p>轻量板块：图像/视频生成前沿</p>
                    <p>2025 十大黑科技概念榜（术语科普）</p>
                    <p>2026 年 AI 趋势预测与企业战略展望</p>
                  </div>
                </div>
              </div>
              <p class="text-xs text-slate-400 mt-6">Source: 量子位智库 2025 年度 AI 十大趋势报告。</p>
            </div>
            <footer class="page-footer border-t border-slate-200 flex justify-between text-xs text-slate-500">
              <span>封底 · 延展阅读</span>
              <span class="font-display text-xl text-slate-300">07</span>
            </footer>
          </section>
        </div>
      </div>
    </div>
  </div>

  <div class="no-print flex items-center gap-4 mt-6">
    <button onclick="prevPage()" class="w-10 h-10 rounded-full border border-slate-600 text-slate-200 hover:text-white hover:border-slate-300 transition-colors">
      <i data-lucide="chevron-left" class="w-5 h-5 mx-auto"></i>
    </button>
    <div id="page-indicators" class="flex gap-2"></div>
    <button onclick="nextPage()" class="w-10 h-10 rounded-full border border-slate-600 text-slate-200 hover:text-white hover:border-slate-300 transition-colors">
      <i data-lucide="chevron-right" class="w-5 h-5 mx-auto"></i>
    </button>
  </div>

  <div id="ai-modal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/60 backdrop-blur-sm p-4 transition-opacity duration-300 opacity-0">
    <div class="bg-white border border-slate-200 w-full max-w-lg rounded-2xl shadow-2xl transform scale-95 transition-transform duration-300 overflow-hidden relative max-h-[80vh] flex flex-col">
      <div class="p-5 border-b border-slate-200 flex justify-between items-center bg-slate-50">
        <div class="flex items-center gap-2 text-accent">
          <i data-lucide="bot" class="w-5 h-5"></i>
          <span id="ai-modal-title" class="font-bold text-sm tracking-widest uppercase">AI Analysis</span>
        </div>
        <button onclick="closeModal()" class="text-slate-400 hover:text-slate-700 transition-colors">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
      </div>
      <div class="p-6 relative min-h-[150px] overflow-y-auto">
        <div id="ai-loading" class="absolute inset-0 flex flex-col items-center justify-center bg-white z-10 hidden">
          <div class="loader mb-3"></div>
          <span class="text-xs text-accent animate-pulse">AI 正在思考...</span>
        </div>
        <div id="ai-content" class="text-sm leading-relaxed text-slate-600 space-y-2"></div>
      </div>
      <div class="p-4 border-t border-slate-200 bg-slate-50 flex justify-end">
        <button onclick="copyToClipboard('ai-content')" class="text-xs text-slate-500 hover:text-slate-700 flex items-center gap-1 transition-colors">
          <i data-lucide="copy" class="w-3 h-3"></i>
          复制内容
        </button>
      </div>
    </div>
  </div>

  <script>
    lucide.createIcons();

    const pagesContainer = document.getElementById('pages-container');
    const pages = Array.from(document.querySelectorAll('.magazine-page'));
    const indicatorsContainer = document.getElementById('page-indicators');
    const viewportScale = document.getElementById('viewport-scale');
    let currentPage = 0;

    function buildIndicators() {
      indicatorsContainer.innerHTML = '';
      pages.forEach((_, index) => {
        const dot = document.createElement('button');
        dot.className = 'w-2.5 h-2.5 rounded-full bg-slate-600/60 hover:bg-slate-200 transition-colors';
        dot.addEventListener('click', () => goToPage(index));
        indicatorsContainer.appendChild(dot);
      });
    }

    function updateIndicators() {
      Array.from(indicatorsContainer.children).forEach((dot, index) => {
        if (index === currentPage) {
          dot.classList.remove('bg-slate-600/60');
          dot.classList.add('bg-white');
        } else {
          dot.classList.add('bg-slate-600/60');
          dot.classList.remove('bg-white');
        }
      });
    }

    function updatePage() {
      pagesContainer.style.transform = `translateX(-${currentPage * 100}%)`;
      updateIndicators();
    }

    function nextPage() {
      if (currentPage < pages.length - 1) {
        currentPage += 1;
        updatePage();
      }
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage -= 1;
        updatePage();
      }
    }

    function goToPage(index) {
      if (index >= 0 && index < pages.length) {
        currentPage = index;
        updatePage();
      }
    }

    function updateScale() {
      const margin = 32;
      const availableWidth = window.innerWidth - margin * 2;
      const availableHeight = window.innerHeight - margin * 2 - 80;
      const scale = Math.min(availableWidth / 794, availableHeight / 1123, 1);
      viewportScale.style.transform = `scale(${scale})`;
    }

    window.addEventListener('resize', updateScale);

    buildIndicators();
    updateIndicators();
    updateScale();

    const apiKey = '';

    async function fetchGemini(promptText) {
      const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
      const payload = {
        contents: [{ parts: [{ text: promptText }] }],
      };
      const delays = [1000, 2000, 4000, 8000, 16000];

      for (let i = 0; i <= delays.length; i++) {
        try {
          const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
          });
          if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`API Request Failed: ${response.status} ${response.statusText} - ${errorText}`);
          }
          const data = await response.json();
          return data.candidates?.[0]?.content?.parts?.[0]?.text || '无法获取内容，请重试。';
        } catch (error) {
          console.warn(`Attempt ${i + 1} failed:`, error);
          if (i === delays.length) return '抱歉，AI 服务暂时繁忙或连接失败，请稍后再试。';
          await new Promise((resolve) => setTimeout(resolve, delays[i]));
        }
      }
    }

    const modal = document.getElementById('ai-modal');
    const modalContent = document.getElementById('ai-content');
    const loadingSpinner = document.getElementById('ai-loading');
    const modalTitle = document.getElementById('ai-modal-title');

    function openModal(title) {
      modalTitle.innerText = title || 'AI Analysis';
      modal.classList.remove('hidden');
      void modal.offsetWidth;
      modal.classList.remove('opacity-0');
      modal.querySelector('div').classList.remove('scale-95');
      modal.querySelector('div').classList.add('scale-100');
      modal.classList.add('flex');
    }

    function closeModal() {
      modal.classList.add('opacity-0');
      modal.querySelector('div').classList.remove('scale-100');
      modal.querySelector('div').classList.add('scale-95');
      setTimeout(() => {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        modalContent.innerHTML = '';
      }, 300);
    }

    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    async function analyzeTrend(title, desc) {
      openModal(`${title} · 深度解读`);
      modalContent.innerHTML = '';
      loadingSpinner.classList.remove('hidden');
      const prompt = `作为一个专业的 AI 行业分析师，请针对以下 2025 年 AI 趋势进行深度简评。\n趋势标题：${title}\n趋势描述：${desc}\n任务：用中文回答，提供一个“商业落地场景”和一个“投资机会”，150 字以内。`;
      const result = await fetchGemini(prompt);
      renderMarkdown(result);
    }

    function openArticleDetail() {
      openModal('文章全文 · 2025 年度 AI 十大趋势');
      modalContent.innerHTML = '';
      loadingSpinner.classList.remove('hidden');
      setTimeout(() => {
        loadingSpinner.classList.add('hidden');
        modalContent.innerHTML = `
          <p><strong>全文占位说明：</strong></p>
          <p>这里将放置完整的文章内容。建议包含：趋势总述、重点案例、结论与行动建议。</p>
          <p>可在后续直接替换 HTML 内容或通过数据渲染。</p>
        `;
      }, 600);
    }

    function formatMarkdown(text) {
      return text.replace(/\*\*(.*?)\*\*/g, '<strong class="text-accent">$1</strong>').replace(/\n/g, '<br>');
    }

    function renderMarkdown(text) {
      loadingSpinner.classList.add('hidden');
      modalContent.innerHTML = formatMarkdown(text);
    }

    function copyToClipboard(elementId) {
      const text = document.getElementById(elementId).innerText;
      navigator.clipboard
        .writeText(text)
        .then(() => {
          alert('已复制到剪贴板');
        })
        .catch(() => {
          const textarea = document.createElement('textarea');
          textarea.value = text;
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);
          alert('已复制到剪贴板');
        });
    }
  </script>
</body>
</html>


